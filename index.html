<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <!-- Meta tags -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />

  <!-- Local styles -->
  <link rel="stylesheet" href="/style.css" />

  <!-- Bootstrap styles -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />

    <title>Bora Lig√°</title>
</head>

<body>

  <div class="container">
    <h3 class="my-3">Bora ligaaa!!!</h3>
    <div class="mb-3">
      <input id="tel" type="text" inputmode="tel" aria-label="phone" class="form-control m-0"
        placeholder="(xx) xxxxx-xxxx" autofocus />
    </div>
    <button type="button" id="whatsapp" class="btn btn-success w-100 my-1">
      Whatsapp
    </button>
    <button type="button" id="caller" class="btn btn-dark w-100 my-1">
      Ligar
    </button>
  </div>

  <script>
    const mask = {
      phone(value) {
        return value
          .replace(/\D/g, '')
          .replace(/(\d{2})(\d)/, '($1) $2')
          .replace(/(\d{4})(\d)/, '$1-$2')
          .replace(/(\d{4})-(\d)(\d{4})/, '$1$2-$3')
          .replace(/(-\d{4})\d+?$/, '$1')
      }
    }
    const tel = document.querySelector('#tel')
    const btn_whatsapp = document.querySelector('#whatsapp')
    const btn_caller = document.querySelector('#caller')
    
    function linkIn(value) {
      window.location.href = value
    }
    
    tel.addEventListener('input', (event) => {
      event.target.value = mask.phone(event.target.value)
    }, false)
    
    btn_whatsapp.addEventListener('click', () => {
      let replaced = tel.value.replace(/\D/g, '')
      let href = 'whatsapp://send?phone=55'
      linkIn(`${href}${replaced}`)
    })
    
    btn_caller.addEventListener('click', () => {
      let replaced = tel.value.replace(/\D/g, '')
      let href = 'tel:'
      linkIn(`${href}${replaced}`)
    })
  </script>
</body>

</html>